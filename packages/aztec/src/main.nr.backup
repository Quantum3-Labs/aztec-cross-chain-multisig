use dep::aztec::macros::aztec;

#[aztec]
pub contract CustomAccount {
    use aztec::{
        macros::{functions::{initializer, private, public}, storage::storage},
        protocol_types::address::AztecAddress,
        state_vars::PublicMutable,
    };

    global IS_VALID_SELECTOR: Field = 0xabf64ad4;

    #[storage]
    struct Storage<Context> {
        owner: PublicMutable<AztecAddress, Context>,
    }

    #[initializer]
    #[public]
    fn constructor(owner: AztecAddress) {
        storage.owner.write(owner);
    }

    #[private]
    fn verify_private_authwit(_inner_hash: Field) -> pub Field {
        IS_VALID_SELECTOR
    }

    #[public]
    fn verify_public_authwit(_inner_hash: Field) -> pub Field {
        IS_VALID_SELECTOR
    }

    #[public]
    fn get_owner() -> AztecAddress {
        storage.owner.read()
    }
}
